var enml=function(){function html2enml(node){var result,$$=angular.element,clone=node.cloneNode(!0),process=$$('<div id="process"></div>'),nodeClassName=$(node).attr("class").split(" ")[0];return $("body").append(process),process=$("#process"),process.append($(clone)),nodewalk(clone.childNodes,process_node),result=$("#process ."+nodeClassName).html().replace(/<br>/g,"<br />").replace(/<hr>/g,"<hr />").replace(/<img data-src="([^>]*)">/g,'<img src="$1" />'),process.remove(),result}function nodewalk(node,fn){for(var i=0;i<node.length;i++)node[i].hasChildNodes()&&nodewalk(node[i].childNodes,fn),1===node[i].nodeType&&fn(node[i])}function process_node(node){"IMG"==node.nodeName&&(node.removeAttribute("src"),node.removeAttribute("alt")),style_inline(node),node.removeAttribute("class"),node.removeAttribute("id")}function style_inline(node){var rules,str_style,nodename=node.nodeName.toLowerCase();if(nodename in EXTRACT_RULE){rules=EXTRACT_RULE[nodename],str_style="";for(var rule,i=0,l=rules.length;l>i;i++)rule=rules[i],str_style+=rule+":"+getComputedStyle(node).getPropertyValue(rule)+";";node.setAttribute("style",str_style)}}var EXTRACT_RULE={blockquote:["border-left"],span:["color"],code:["border","background-color"],pre:["background-color","margin"]};return{html2enml:html2enml}}();