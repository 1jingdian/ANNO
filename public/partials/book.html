<section id="one-book"><h1><a ng-href="/#/{{ author.uid }}" ng-show="author.id != user.id">{{ author.name }}的书架 > </a>{{ book.title }}</h1><div class="cubic-view"><div color-thief="color-thief" image="book_cover" ng-model="dominateColor" class="book-cube"><div ng-class="{ 'opened': book_opened }" ng-click="openBook()" ng-style="{ 'background-image': dominateColor.image? ('url(' + dominateColor.image + ')' ): 'none' }" class="book-front"></div><div ng-mouseleave="openBook()" class="book-page"><div class="page-content"><a href="/#/{{ user.uid }}/book/{{ book.id }}/new" class="icon-feather">写新笔记</a><a href="javascript:;" ng-click="exportNotes()">导出所有笔记</a><a href="http://book.douban.com/subject/{{ book.id }}/" target="_blank">去豆瓣看这本书</a></div></div><div ng-style="{ 'background-color': dominateColor.background }" class="book-back"></div><div class="book-top"></div><div class="book-bottom"></div><div ng-style="{ 'background-color': dominateColor.background, 'color': dominateColor.foreground }" class="book-left"><span class="book-title">{{ book.title }}</span></div><div class="book-right"></div></div></div><section class="main"><!-- p {{ book.summary }}--><header><h2>共{{ book.notes_count }}篇笔记</h2><nav class="order button-group"><button ng-click="order='time'; reverse=true" ng-class="{'active': (order=='time')}">最新</button><button ng-click="order='page_no'; reverse=false" ng-class="{'active': (order=='page_no')}">页码</button></nav></header><ul class="notes"><li ng-repeat="note in book.notes | orderBy: order : reverse" class="note"><a ng-href="/#/note/{{ note.id }}" class="note-mask"><time datetime="{{ note.time }}">{{ note.time | date: note.time : 'longDate'}}</time><h3>{{ note.chapter || ("第" + note.page_no + "页") }}</h3><p class="note-summary">{{ note.summary }}</p><span ng-class="{ 'icon-lock': note.privacy == '1' }" class="note-page">P{{ note.page_no }}</span></a></li></ul></section></section><script type="text/ng-template" id="modalExport.html"><div class="modal-export"><div class="modal-header"><h3>选择导出格式</h3></div><div class="modal-body"><div class="buttons-group"><button ng-click="changeExportFormat('markdown')" ng-class="{ 'active': exportFormat == 'markdown' }" class="button-radio">Markdown</button><button ng-click="changeExportFormat('html')" ng-class="{ 'active': exportFormat == 'html' }" class="button-radio">HTML</button></div><div class="export-preview"><div ng-show="exportFormat == 'markdown'" class="preview-markdown">{{ exports }}</div><div ng-show="exportFormat == 'html'" class="preview-html"><previewer markdown="exports"></previewer></div></div></div><div class="modal-footer"><div class="buttons-group"><button ng-click="download()" class="button-primary">导出</button><button ng-click="cancel()" class="button-default">取消</button></div></div></div></script>